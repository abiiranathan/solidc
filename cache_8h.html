<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>solidc: include/cache.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">solidc
   </div>
   <div id="projectbrief">Robust collection of general-purpose cross-platform C libraries and data structures designed for rapid and safe development in C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">cache.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Cache management utilities for performance optimization.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for cache.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="cache_8h__incl.svg" width="288" height="110"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="cache_8h__dep__incl.svg" width="254" height="110"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="cache_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aeb3e0c7f441c9ec8a6c071690feb58b0" id="r_aeb3e0c7f441c9ec8a6c071690feb58b0"><td class="memItemLeft" align="right" valign="top">typedef struct cache_s&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a></td></tr>
<tr class="separator:aeb3e0c7f441c9ec8a6c071690feb58b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac2428d5182dd4b3ad606fbd7a368e657" id="r_ac2428d5182dd4b3ad606fbd7a368e657"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#ac2428d5182dd4b3ad606fbd7a368e657">cache_create</a> (size_t capacity, uint32_t default_ttl)</td></tr>
<tr class="separator:ac2428d5182dd4b3ad606fbd7a368e657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81a74098387faa1e105aa3e9e1d60a5e" id="r_a81a74098387faa1e105aa3e9e1d60a5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a81a74098387faa1e105aa3e9e1d60a5e">cache_destroy</a> (<a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *cache)</td></tr>
<tr class="separator:a81a74098387faa1e105aa3e9e1d60a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba51d24ac0498f9754391c7bbbdea2c9" id="r_aba51d24ac0498f9754391c7bbbdea2c9"><td class="memItemLeft" align="right" valign="top">const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#aba51d24ac0498f9754391c7bbbdea2c9">cache_get</a> (<a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *cache, const char *key, size_t key_len, size_t *out_len)</td></tr>
<tr class="separator:aba51d24ac0498f9754391c7bbbdea2c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6136c205702c736fb30213e412e9384c" id="r_a6136c205702c736fb30213e412e9384c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a6136c205702c736fb30213e412e9384c">cache_release</a> (const void *ptr)</td></tr>
<tr class="separator:a6136c205702c736fb30213e412e9384c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7b9a98db04121fc2035f631396a8e78" id="r_aa7b9a98db04121fc2035f631396a8e78"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#aa7b9a98db04121fc2035f631396a8e78">cache_set</a> (<a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *cache, const char *key, size_t key_len, const void *value, size_t value_len, uint32_t ttl_override)</td></tr>
<tr class="separator:aa7b9a98db04121fc2035f631396a8e78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc9464ab271fbe118778e0806c98f44e" id="r_afc9464ab271fbe118778e0806c98f44e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#afc9464ab271fbe118778e0806c98f44e">cache_invalidate</a> (<a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *cache, const char *key)</td></tr>
<tr class="separator:afc9464ab271fbe118778e0806c98f44e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a271ea0910fa1de04b3af2390450da80c" id="r_a271ea0910fa1de04b3af2390450da80c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a271ea0910fa1de04b3af2390450da80c">cache_clear</a> (<a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *cache)</td></tr>
<tr class="separator:a271ea0910fa1de04b3af2390450da80c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa05aedf849c04be0096c4facea471e92" id="r_aa05aedf849c04be0096c4facea471e92"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#aa05aedf849c04be0096c4facea471e92">get_total_cache_size</a> (<a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *cache)</td></tr>
<tr class="separator:aa05aedf849c04be0096c4facea471e92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc21aff4742325c41f74347be9e1580" id="r_abbc21aff4742325c41f74347be9e1580"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#abbc21aff4742325c41f74347be9e1580">get_total_capacity</a> (<a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *cache)</td></tr>
<tr class="separator:abbc21aff4742325c41f74347be9e1580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5a96030b9593890f879b69f437f1e5d" id="r_ab5a96030b9593890f879b69f437f1e5d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#ab5a96030b9593890f879b69f437f1e5d">cache_save</a> (<a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *cache_ptr, const char *filename)</td></tr>
<tr class="separator:ab5a96030b9593890f879b69f437f1e5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ba276605ad3bca9dfbd3cac521ec379" id="r_a0ba276605ad3bca9dfbd3cac521ec379"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache_8h.html#a0ba276605ad3bca9dfbd3cac521ec379">cache_load</a> (<a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *cache_ptr, const char *filename)</td></tr>
<tr class="separator:a0ba276605ad3bca9dfbd3cac521ec379"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Cache management utilities for performance optimization. </p>

<p class="definition">Definition in file <a class="el" href="cache_8h_source.html">cache.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="aeb3e0c7f441c9ec8a6c071690feb58b0" name="aeb3e0c7f441c9ec8a6c071690feb58b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb3e0c7f441c9ec8a6c071690feb58b0">&#9670;&#160;</a></span>cache_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct cache_s <a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opaque handle to the cache. Implementation details are hidden in <a class="el" href="cache_8c_source.html">cache.c</a> to allow alignment optimizations without breaking ABI. </p>

<p class="definition">Definition at line <a class="el" href="cache_8h_source.html#l00025">25</a> of file <a class="el" href="cache_8h_source.html">cache.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a271ea0910fa1de04b3af2390450da80c" name="a271ea0910fa1de04b3af2390450da80c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a271ea0910fa1de04b3af2390450da80c">&#9670;&#160;</a></span>cache_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cache_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *&#160;</td>
          <td class="paramname"><em>cache_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clears all entries from the cache index.</p>
<p>Removes all entries from the cache. Decrements reference counts on all entries. </p>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00564">564</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

</div>
</div>
<a id="ac2428d5182dd4b3ad606fbd7a368e657" name="ac2428d5182dd4b3ad606fbd7a368e657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2428d5182dd4b3ad606fbd7a368e657">&#9670;&#160;</a></span>cache_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> * cache_create </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>default_ttl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new cache. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">capacity</td><td>Total maximum number of entries (distributed across shards). </td></tr>
    <tr><td class="paramname">default_ttl</td><td>Default time-to-live in seconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to new cache, or NULL on failure.</dd></dl>
<p>Creates a new cache with the specified capacity and default TTL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">capacity</td><td>Total capacity across all shards (0 = default 1000) </td></tr>
    <tr><td class="paramname">default_ttl</td><td>Default time-to-live in seconds (0 = CACHE_DEFAULT_TTL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to cache on success, NULL on allocation failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00336">336</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

</div>
</div>
<a id="a81a74098387faa1e105aa3e9e1d60a5e" name="a81a74098387faa1e105aa3e9e1d60a5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81a74098387faa1e105aa3e9e1d60a5e">&#9670;&#160;</a></span>cache_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cache_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *&#160;</td>
          <td class="paramname"><em>cache_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroys the cache and frees resources. Note: Zero-copy references held by users remain valid until cache_release() is called, even after the cache object is destroyed.</p>
<p>Destroys the cache and frees all associated memory. Decrements reference counts on all entries. </p>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00384">384</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

</div>
</div>
<a id="aba51d24ac0498f9754391c7bbbdea2c9" name="aba51d24ac0498f9754391c7bbbdea2c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba51d24ac0498f9754391c7bbbdea2c9">&#9670;&#160;</a></span>cache_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const void * cache_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *&#160;</td>
          <td class="paramname"><em>cache_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>klen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>out_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Zero-Copy Retrieval. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The cache handle. </td></tr>
    <tr><td class="paramname">key</td><td>The lookup key. </td></tr>
    <tr><td class="paramname">key_len</td><td>The length of the key. </td></tr>
    <tr><td class="paramname">out_len</td><td>Pointer to store the size of the retrieved value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the value data, or NULL if not found. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>YOU MUST CALL cache_release() on the returned pointer when done.</dd></dl>
<p>Retrieves a value from the cache by key.</p>
<p>The returned pointer is reference-counted. Caller must call cache_release() when done. Automatically checks expiration and invalidates expired entries.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache_ptr</td><td>The cache instance </td></tr>
    <tr><td class="paramname">key</td><td>The key string (null-terminated) </td></tr>
    <tr><td class="paramname">out_len</td><td>Output: length of the value (can be NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to value on success, NULL if not found or expired </dd></dl>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00414">414</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

<p class="reference">References <a class="el" href="cache_8c_source.html#l00530">cache_invalidate()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="cache_8h_aba51d24ac0498f9754391c7bbbdea2c9_cgraph.svg" width="279" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="afc9464ab271fbe118778e0806c98f44e" name="afc9464ab271fbe118778e0806c98f44e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc9464ab271fbe118778e0806c98f44e">&#9670;&#160;</a></span>cache_invalidate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cache_invalidate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *&#160;</td>
          <td class="paramname"><em>cache_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Invalidates (removes) an entry from the cache index.</p>
<p>Removes a key from the cache. Decrements the entry's reference count. </p>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00530">530</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="cache_8c_source.html#l00414">cache_get()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="cache_8h_afc9464ab271fbe118778e0806c98f44e_icgraph.svg" width="279" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0ba276605ad3bca9dfbd3cac521ec379" name="a0ba276605ad3bca9dfbd3cac521ec379"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ba276605ad3bca9dfbd3cac521ec379">&#9670;&#160;</a></span>cache_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cache_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *&#160;</td>
          <td class="paramname"><em>cache_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads cache entries from a binary file.</p>
<p>Entries that are already expired in the file are skipped. Entries loaded will be subject to the current cache's eviction policy (if the file contains more items than the cache capacity).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache_ptr</td><td>The cache to load into. </td></tr>
    <tr><td class="paramname">filename</td><td>The input file path. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on I/O error or invalid format. </dd></dl>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00709">709</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

<p class="reference">References <a class="el" href="cache_8c_source.html#l00472">cache_set()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="cache_8h_a0ba276605ad3bca9dfbd3cac521ec379_cgraph.svg" width="240" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6136c205702c736fb30213e412e9384c" name="a6136c205702c736fb30213e412e9384c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6136c205702c736fb30213e412e9384c">&#9670;&#160;</a></span>cache_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cache_release </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases a reference to a zero-copy value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>The pointer returned by cache_get().</td></tr>
  </table>
  </dd>
</dl>
<p>Releases a reference to a cached value. Must be called for every pointer returned by cache_get(). </p>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00555">555</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

</div>
</div>
<a id="ab5a96030b9593890f879b69f437f1e5d" name="ab5a96030b9593890f879b69f437f1e5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5a96030b9593890f879b69f437f1e5d">&#9670;&#160;</a></span>cache_save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cache_save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *&#160;</td>
          <td class="paramname"><em>cache_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Serializes the current cache state to a binary file.</p>
<p>The operation locks shards one by one, allowing concurrent reads/writes to other shards while saving. The snapshot is not atomic across shards.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache_ptr</td><td>The cache to save. </td></tr>
    <tr><td class="paramname">filename</td><td>The output file path. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on I/O error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00628">628</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

</div>
</div>
<a id="aa7b9a98db04121fc2035f631396a8e78" name="aa7b9a98db04121fc2035f631396a8e78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7b9a98db04121fc2035f631396a8e78">&#9670;&#160;</a></span>cache_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cache_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *&#160;</td>
          <td class="paramname"><em>cache_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>klen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>value_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ttl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stores a value in the cache. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The cache handle. </td></tr>
    <tr><td class="paramname">key</td><td>The key. </td></tr>
    <tr><td class="paramname">value</td><td>The data to store. </td></tr>
    <tr><td class="paramname">value_len</td><td>The length of the data. </td></tr>
    <tr><td class="paramname">ttl_override</td><td>Optional TTL in seconds (0 uses default). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on failure.</dd></dl>
<p>Inserts or updates a key-value pair in the cache.</p>
<p>If the cache is at capacity, triggers CLOCK eviction. Creates a new entry with the specified TTL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache_ptr</td><td>The cache instance </td></tr>
    <tr><td class="paramname">key</td><td>The key string (null-terminated) </td></tr>
    <tr><td class="paramname">klen</td><td>The length of the key. </td></tr>
    <tr><td class="paramname">value</td><td>Pointer to value data </td></tr>
    <tr><td class="paramname">value_len</td><td>Length of value data in bytes </td></tr>
    <tr><td class="paramname">ttl</td><td>Time-to-live in seconds (0 = use default_ttl) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on allocation failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00472">472</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="cache_8c_source.html#l00709">cache_load()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="cache_8h_aa7b9a98db04121fc2035f631396a8e78_icgraph.svg" width="240" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa05aedf849c04be0096c4facea471e92" name="aa05aedf849c04be0096c4facea471e92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa05aedf849c04be0096c4facea471e92">&#9670;&#160;</a></span>get_total_cache_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t get_total_cache_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *&#160;</td>
          <td class="paramname"><em>cache_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the total number of entries currently in the cache across all shards. Thread-safe: acquires read locks on all shards. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The cache instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Total number of cached entries, or 0 if cache is NULL.</dd></dl>
<p>Returns the total number of entries across all shards. Takes read locks on all shards. </p>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00586">586</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

</div>
</div>
<a id="abbc21aff4742325c41f74347be9e1580" name="abbc21aff4742325c41f74347be9e1580"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbc21aff4742325c41f74347be9e1580">&#9670;&#160;</a></span>get_total_capacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t get_total_capacity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cache_8h.html#aeb3e0c7f441c9ec8a6c071690feb58b0">cache_t</a> *&#160;</td>
          <td class="paramname"><em>cache_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the total capacity of the cache across all shards. Thread-safe: acquires read locks on all shards. Note: Capacity is set at creation and never changes, but we lock for consistency. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The cache instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Total capacity, or 0 if cache is NULL.</dd></dl>
<p>Returns the total capacity across all shards. Takes read locks on all shards. </p>

<p class="definition">Definition at line <a class="el" href="cache_8c_source.html#l00602">602</a> of file <a class="el" href="cache_8c_source.html">cache.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
